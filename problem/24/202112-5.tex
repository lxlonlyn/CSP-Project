% \section{202112-5 极差路径}

% \input{problem/24/202112-5-p.tex}

\subsection{\texorpdfstring{$n \le 5000$}{n <= 5000} 数据——枚举两点}

\subsubsection{思路}

先考虑用最朴素的思路来解决问题：枚举两个端点，然后计算两个端点简单路径上的所有路径。
枚举两个端点的复杂度为 $\mathrm{O}(n^2)$，计算路径 $\mathrm{O}(n)$，总复杂度 $\mathrm{O}(n^3)$，
无法通过任何测试点。

思考可以节省的时间：在计算路径的时候，我们都是从两点中一点出发开始搜索，直到找到另一个节点为止。
由于是一棵树上的搜索，我们从出发点开始，搜索到的每一个节点都是一条简单路径。
我们只需要从一个节点开始，遍历整棵树，就可以得到结果了，复杂度 $\mathrm{O}(n^2)$。

注意到可能会有重复：若 $(u,v)$ 是合法点对，那么 $(v,u)$ 也会被加入。
我们可以先特判 $u=v$ 的情况，对于其他情况，每种合法点对都重复出现了一次，只需要将答案减半即可。

\subsubsection{C++实现}

\lstinputlisting[language=c++]{code/24/202112-5-12.cpp}
